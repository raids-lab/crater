---
title: Prometheus Stack 배포 가이드
description: kube-prometheus-stack은 Rook Ceph RBD 스토리지 백엔드를 통해 GPU, 작업 수명 주기 및 클러스터 메트릭을 포함한 포괄적인 모니터링을 제공합니다.
---

## 개요

Crater는 **kube-prometheus-stack**에 의존하여 견고하고 확장 가능한 모니터링 솔루션을 제공합니다. 다음과 같은 실시간 및 역사적 가시성을 제공합니다:

- 클러스터 자원 사용량 (CPU, 메모리, GPU, 스토리지)
- 작업 수명 주기 메트릭
- 시스템 수준 성능 지표
- GPU 상태 및 사용률 (DCGM를 통해)
- 애플리케이션별 맞춤형 메트릭

### 핵심 구성 요소

- **Prometheus**: 메트릭 수집 및 경고를 위한 시계열 데이터베이스
- **Grafana**: 대시보드 시각화 및 사용자 인터페이스 메트릭 패널
- **Alertmanager**: 선택적 경고 라우팅 시스템 (기본적으로 비활성화됨)
- **DCGM Exporter**: `gpu-operator`에서 GPU 메트릭을 Prometheus로 내보냅니다.
- **metrics-server**: Kubernetes 자원 메트릭 제공 (CPU, 메모리)

Crater는 Grafana 대시보드를 **자신의 프론트엔드에 직접 통합**하여 플랫폼 UI를 벗어나지 않고도 사용자에게 다차원의 통찰을 제공합니다.

---

## 스토리지 백엔드

우리는 Prometheus의 지속 가능한 스토리지 백엔드로 **Rook Ceph RBD**를 사용합니다.

이것은 다음과 같은 장점을 제공합니다:

- 역사적 메트릭의 고가용성 및 내구성
- 대규모 시계열 데이터 수집에 적합한 블록 수준 성능

> 📌 Prometheus 스택을 설치하기 **전에** `rook-ceph`가 올바르게 설치되었고 `rook-ceph-rbd` StorageClass가 사용 가능하다는 것을 확인하세요.

---

## 의존성

Crater 모니터링을 완전히 활성화하려면 다음 구성 요소가 **먼저 설치되어 있어야 합니다**:

| 의존성           | 목적                                           | 참조                                                                 |
|------------------|------------------------------------------------|---------------------------------------------------------------------|
| `rook-ceph-rbd`  | 지속 가능한 스토리지 백엔드                    | [docs/rook-ceph.md](./rook-ceph.md)                                 |
| `gpu-operator`   | DCGM Exporter (NVIDIA GPU 메트릭)              | [docs/gpu-operator.md](./gpu-operator.md)                           |
| `metrics-server` | 기본 CPU/메모리 자원 메트릭                    | [docs/metrics-server.md](./metrics-server.md)                       |

---

## Crater 맞춤 설정

다음에 대해 수정된 `values.yaml` 및 서브차트 구성 파일을 제공합니다:

- DCGM 메트릭 수집 활성화
- Crater 작업 부하에 관련된 Grafana 대시보드 사전 로드
- Grafana 서비스 유형을 `ClusterIP`로 설정 및 Crater 관리 ingress와 연동
- Prometheus에 긴 유지 기간 및 커스텀 스토리지 클래스 설정
- 이미지 레지스트리 및 저장소 경로 조정

이러한 설정을 검토하고 편집하여 클러스터 환경에 맞게 조정해 주세요, 예를 들어:

- 🔁 **StorageClass**: `rook-ceph-rbd`로 설정되어야 합니다
- 📦 **이미지 저장소**: 필요에 따라 로컬/프라이빗 레지스트리와 일치시켜 주세요

---

## 설치

Crater의 사전 구성된 값과 함께 공식 Helm 차트를 사용하는 것을 권장합니다.
 
📖 상세 가이드: [`deployments/prometheus-stack/README.md`](../deployments/prometheus-stack/README.md)