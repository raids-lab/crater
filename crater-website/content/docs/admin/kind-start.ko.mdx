---
title: ìµœì†Œí™” ë°°í¬
description: ë³¸ ë¬¸ì„œëŠ” Kindë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ì—ì„œ Crater í™˜ê²½ì„ ë¹ ë¥´ê²Œ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤. CraterëŠ” Kubernetes ê¸°ë°˜ì˜ ë¶„ì‚° í•™ìŠµ í”Œë«í¼ì´ë©°, ë³¸ ê°€ì´ë“œëŠ” Kind í´ëŸ¬ìŠ¤í„° ìƒì„±ë¶€í„° Craterì— í•„ìš”í•œ êµ¬ì„± ìš”ì†Œ ë°°í¬ê¹Œì§€ì˜ ì „ì²´ ê³¼ì •ì„ ë‹¤ë£¹ë‹ˆë‹¤.
---

## 1. í™˜ê²½ ì¤€ë¹„

### 1.1 Kind ì„¤ì¹˜

<Callout type="info">
ì°¸ê³  ë¬¸ì„œ: https://kind.sigs.k8s.io/docs/user/quick-start/
</Callout>

```bash
# Kind ì„¤ì¹˜
curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.20.0/kind-linux-amd64
chmod +x ./kind
sudo mv ./kind /usr/local/bin/kind
```

<Callout type="info">
    ê¶Œí•œ ë¬¸ì œ ë°œìƒ ì‹œ `sudo` ì‚¬ìš© ë˜ëŠ” Kindë¥¼ ì“°ê¸° ê°€ëŠ¥í•œ ë””ë ‰í„°ë¦¬ë¡œ ì´ë™í•´ ë³´ì„¸ìš”
</Callout>

### 1.2 kubectl ë° Helm ì„¤ì¹˜

```bash
# kubectl ì„¤ì¹˜
curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
chmod +x kubectl
sudo mv kubectl /usr/local/bin/

# Helm ì„¤ì¹˜
curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash
```

## 2. Kind í´ëŸ¬ìŠ¤í„° ìƒì„±

### 2.1 í´ëŸ¬ìŠ¤í„° êµ¬ì„± íŒŒì¼ ìƒì„±

<Callout type="info">
ì°¸ê³  ë¬¸ì„œ: https://kind.sigs.k8s.io/docs/user/ingress/
</Callout>

```yaml
# kind-cluster.yaml
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
  - role: control-plane
  - role: worker
    extraPortMappings:
    - containerPort: 80
      hostPort: 8080
      protocol: TCP
    - containerPort: 443
      hostPort: 8443
      protocol: TCP
```

<Callout type="info">
    í¬íŠ¸ ë§¤í•‘ ì„¤ì •ì€ í´ëŸ¬ìŠ¤í„° ë‚´ ì„œë¹„ìŠ¤ì— ëŒ€í•œ í˜¸ìŠ¤íŠ¸ ì ‘ê·¼ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ë©°, Ingress ì»¨íŠ¸ë¡¤ëŸ¬ì— íŠ¹íˆ ì¤‘ìš”í•©ë‹ˆë‹¤
</Callout>

### 2.2 í´ëŸ¬ìŠ¤í„° ìƒì„±

```bash
kind create cluster --config kind-cluster.yaml
```

**ì˜ˆìƒ ê²°ê³¼:**
```
Creating cluster "kind" ...
 âœ“ Ensuring node image (kindest/node:v1.27.3) ğŸ–¼
 âœ“ Preparing nodes ğŸ“¦ ğŸ“¦
 âœ“ Writing configuration ğŸ“œ
 âœ“ Starting control-plane ğŸ•¹ï¸
 âœ“ Installing CNI ğŸ”Œ
 âœ“ Installing StorageClass ğŸ’¾
 âœ“ Joining worker nodes ğŸšœ
Set kubectl context to "kind-kind"
You can now use your cluster with:
kubectl cluster-info --context kind-kind
```

## 3. Ingress-Nginx ë°°í¬ (Kind í´ëŸ¬ìŠ¤í„°ìš©)

<Callout type="info">
    ì°¸ê³  ë¬¸ì„œ: https://kind.sigs.k8s.io/docs/user/ingress/
</Callout>

```bash
kubectl apply -f https://kind.sigs.k8s.io/examples/ingress/deploy-ingress-nginx.yaml
```

**ì„¤ì¹˜ í™•ì¸:**
```bash
kubectl wait --namespace ingress-nginx \
  --for=condition=ready pod \
  --selector=app.kubernetes.io/component=controller \
  --timeout=90s
```

## 4. PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ë°°í¬

<Callout type="info">
    ì°¸ê³  ë¬¸ì„œ: https://artifacthub.io/packages/helm/bitnami/postgresql
</Callout>

```bash
# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
kubectl create namespace crater-system

# í˜„ì¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì»¨í…ìŠ¤íŠ¸ ì„¤ì •
kubectl config set-context --current --namespace=crater-system

# Bitnami Helm ì €ì¥ì†Œ ì¶”ê°€
helm repo add bitnami https://charts.bitnami.com/bitnami

# PostgreSQL ì„¤ì¹˜
helm install crater-postgresql bitnami/postgresql -n crater-system
```

**ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ ê°€ì ¸ì˜¤ê¸°:**
```bash
export POSTGRES_PASSWORD=$(kubectl get secret --namespace crater-system crater-postgresql -o jsonpath="{.data.postgres-password}" | base64 -d)
echo "ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸: $POSTGRES_PASSWORD"
```

<Callout type="info">
    ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ëŠ” í›„ì† Crater ë°°í¬ì— ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë‹ˆ ì˜ ë³´ê´€í•˜ì„¸ìš”
</Callout>

## 5. Volcano ìŠ¤ì¼€ì¤„ëŸ¬ ë°°í¬

<Callout type="info">
    ì°¸ê³  ë¬¸ì„œ: https://volcano.sh/ko/docs/v1.11.0/installation/
</Callout>

```bash
# Volcano Helm ì €ì¥ì†Œ ì¶”ê°€
helm repo add volcano-sh https://volcano-sh.github.io/helm-charts

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„± ë° Volcano ì„¤ì¹˜
helm install volcano volcano-sh/volcano -n volcano-system --create-namespace
```

**ì„¤ì¹˜ í™•ì¸:**
```bash
kubectl get pods -n volcano-system
```

**ì˜ˆìƒ ê²°ê³¼:**
```
NAME                                   READY   STATUS    RESTARTS   AGE
volcano-admission-xxxxxxxxx-xxxxx     1/1     Running   0          1m
volcano-controllers-xxxxxxxx-xxxxx    1/1     Running   0          1m
volcano-scheduler-xxxxxxxx-xxxxx      1/1     Running   0          1m
```

## 6. NFS ìŠ¤í† ë¦¬ì§€ ë°°í¬

<Callout type="info">
    ì°¸ê³  ë¬¸ì„œ: https://github.com/kubernetes-sigs/nfs-ganesha-server-and-external-provisioner
</Callout>

```bash
# NFS Provisioner Helm ì €ì¥ì†Œ ì¶”ê°€
helm repo add nfs-ganesha-server-and-external-provisioner https://kubernetes-sigs.github.io/nfs-ganesha-server-and-external-provisioner/

# NFS ì„œë²„ í”„ë¡œë¹„ì €ë„ˆ ì„¤ì¹˜
helm install nfs-provisioner nfs-ganesha-server-and-external-provisioner/nfs-server-provisioner -n nfs-system --create-namespace
```

**ìŠ¤í† ë¦¬ì§€ í´ë˜ìŠ¤ í™•ì¸:**
```bash
kubectl get storageclass
```

**ì˜ˆìƒ ê²°ê³¼:**
```
NAME   PROVISIONER                                       RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
nfs    cluster.local/nfs-provisioner-nfs-server-provisioner   Delete          Immediate           true                   1m
```

## 7. Crater ë°°í¬

### 7.1 Crater Helm Chart ê°’ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°

```bash
helm show values oci://ghcr.io/raids-lab/crater --version 0.1.0 > values.yaml
```

### 7.2 ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •

`values.yaml` íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤:

```yaml
postgres:
  host: crater-postgresql.crater-system.svc.cluster.local
  port: 5432
  dbname: postgres
  user: postgres
  password: "ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸"  # ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸ë¡œ êµì²´
  sslmode: disable
  TimeZone: Asia/Shanghai
```

### 7.3 Crater ì„¤ì¹˜

```bash
helm install crater oci://ghcr.io/raids-lab/crater --version 0.1.0 -n crater-system -f values.yaml
```

**ì„¤ì¹˜ í™•ì¸:**
```bash
kubectl get pods -n crater-system
```

<Callout type="success">
    ëª¨ë“  Podê°€ Running ìƒíƒœì´ë©´ Crater í™˜ê²½ì´ ì„±ê³µì ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!
</Callout>

## 8. Crater ì•¡ì„¸ìŠ¤

### 8.1 ì•¡ì„¸ìŠ¤ ì£¼ì†Œ ê°€ì ¸ì˜¤ê¸°

```bash
kubectl get ingress -n crater-system
```

### 8.2 ë¡œì»¬ hosts ì„¤ì • (í•„ìš” ì‹œ)

ë¡œì»¬ Kind í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° `/etc/hosts`ì— ë§¤í•‘ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```
127.0.0.1 crater.example.com
```

### 8.3 ì›¹ ì¸í„°í˜ì´ìŠ¤ ì•¡ì„¸ìŠ¤

ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ìŒ ì£¼ì†Œë¡œ ì ‘ì†í•˜ì„¸ìš”: `http://crater.example.com:8080` (Ingress ì„¤ì •ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ)

## 9. ë¬¸ì œ í•´ê²°

### 9.1 ì¼ë°˜ì ì¸ ë¬¸ì œ

<Callout type="warn">
    **ë¬¸ì œ:** Podê°€ ì‹œì‘ë˜ì§€ ì•Šê±°ë‚˜ ì§€ì†ì ìœ¼ë¡œ ì¬ì‹œì‘ë¨
</Callout>

**í•´ê²° ë°©ë²•:**
```bash
# Pod ë¡œê·¸ í™•ì¸
kubectl logs <pod-name> -n crater-system

# Pod ìƒì„¸ ì •ë³´ í™•ì¸
kubectl describe pod <pod-name> -n crater-system
```

<Callout type="warn">
    **ë¬¸ì œ:** ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
</Callout>

**í•´ê²° ë°©ë²•:**
```bash
# ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
kubectl get svc -n crater-system | grep postgres

# ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
kubectl run postgres-test --rm -it --image=postgres:13 --restart=Never -- \
  psql -h crater-postgresql.crater-system.svc.cluster.local -U postgres
```

## 10. í™˜ê²½ ì •ë¦¬

```bash
# Kind í´ëŸ¬ìŠ¤í„° ì‚­ì œ
kind delete cluster

# ë˜ëŠ” íŠ¹ì • ë¦¬ì†ŒìŠ¤ ì‚­ì œ
helm uninstall crater -n crater-system
helm uninstall crater-postgresql -n crater-system
helm uninstall volcano -n volcano-system
helm uninstall nfs-provisioner -n nfs-system
```

<Callout type="warn">
    í´ëŸ¬ìŠ¤í„° ì‚­ì œ ì‹œ ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤. ì¤‘ìš”í•œ ë°ì´í„°ëŠ” ë¯¸ë¦¬ ë°±ì—…í•˜ì„¸ìš”
</Callout>

## ìš”ì•½

ì´ ê°€ì´ë“œë¥¼ í†µí•´ Kind í´ëŸ¬ìŠ¤í„°ì— ì™„ì „í•œ Crater í™˜ê²½ì„ ì„±ê³µì ìœ¼ë¡œ ë°°í¬í–ˆìŠµë‹ˆë‹¤. í¬í•¨ëœ êµ¬ì„± ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

- âœ… Kind Kubernetes í´ëŸ¬ìŠ¤í„°
- âœ… Ingress-Nginx ì»¨íŠ¸ë¡¤ëŸ¬
- âœ… PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
- âœ… Volcano ìŠ¤ì¼€ì¤„ëŸ¬
- âœ… NFS ìŠ¤í† ë¦¬ì§€ í”„ë¡œë¹„ì €ë„ˆ
- âœ… Crater í•™ìŠµ í”Œë«í¼

ì´ì œ Craterë¥¼ ì‚¬ìš©í•˜ì—¬ ë¶„ì‚° í•™ìŠµ ì‘ì—…ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¸ì œê°€ ë°œìƒí•  ê²½ìš° ê° êµ¬ì„± ìš”ì†Œì˜ ê³µì‹ ë¬¸ì„œë‚˜ ë¡œê·¸ í™•ì¸ì„ í†µí•´ ë¬¸ì œ í•´ê²°ì„ ì‹œë„í•´ ë³´ì„¸ìš”.