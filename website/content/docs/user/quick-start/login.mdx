---
title: 平台访问
description: 使用现有账号登录 Crater 或者创建 Crater 账号
---

为了使用 Crater 平台，您需要拥有一个有效的平台账号。根据平台配置，您可以选择使用实验室 LDAP 账号登录，或通过 Crater 平台账号进行访问。

如果您看不到本文档中某些登录方式的入口，这也是正常的，具体可以使用哪些登录方式，取决于您平台管理员的配置。

## LDAP 登录与注册

### 概述
Crater 支持 LDAP 账号的自动注册与信息同步，您无需手动创建账号，直接输入 LDAP 账号密码即可登录。

如果您是 ACT 实验室成员，拥有实验室统一认证账号，应当使用此方式。

### 认证流程

<Mermaid
  chart="
flowchart TD;
    A[输入 LDAP 账号密码] --> B{LDAP 服务器认证};
    B -- 认证失败 --> C[返回凭据错误];
    B -- 认证成功 --> D{Crater 数据库<br/>是否存在该用户？};
    D -- 否 --> E1[获取用户 UID/GID<br/>从 LDAP 属性或外部服务];
    E1 --> E2[在 Crater 数据库中<br/>自动创建账号并同步属性];
    D -- 是 --> F[更新 Crater 数据库属性<br/>如邮箱、昵称等];
    E2 --> G[分配默认队列权限];
    F --> H[生成 JWT 令牌];
    G --> H;
    H --> I[登录成功];
"
/>

### 错误快查

<Callout>
目前平台错误信息处理体系正在重构，将会在重构后补充具体的错误信息的快查文档。
</Callout>

## 平台登录

### 概述
如果您在 Crater 手动注册过账号，或是管理员分配给您账号时要求使用此种登录方式，那么请您通过此种方式登录。

需要注意的是，通常您不能通过此种登录方式，直接登录您的 LDAP 账号或者其他账号。

### 认证流程

<Mermaid
  chart="
flowchart TD;
    A[输入 Crater 账号密码] --> B{Crater 数据库比对<br/>Bcrypt 校验};
    B -- 校验失败 --> C[返回用户名或密码错误];
    B -- 校验成功 --> D{用户状态检查};
    D -- 非活跃/禁用 --> E[返回用户未启用];
    D -- 活跃 --> F[获取用户关联的项目/队列];
    F --> G[生成 JWT 令牌];
    G --> H[登录成功];
"
/>

### 错误快查

<Callout>
目前平台错误信息处理体系正在重构，将会在重构后补充具体的错误信息的快查文档。
</Callout>

## 平台注册

### 概述
当管理员开启了「允许自主注册」功能时，尚未拥有任何账号的新用户可以通过注册页面创建 Crater 平台账号。

### 认证流程

<Mermaid
  chart="
flowchart TD;
    A[填写用户名与密码] --> B{平台注册开关检查};
    B -- 已关闭 --> C[提示禁止自主注册];
    B -- 已开启 --> D{用户名唯一性检查};
    D -- 已存在 --> E[提示用户名冲突];
    D -- 不存在 --> F1[分配 Crater 默认 UID/GID 1001];
    F1 --> F2[在 Crater 数据库中创建用户记录];
    F2 --> G[初始化用户空间];
    G --> H[关联默认公共队列];
    H --> I[注册成功并自动登录];
"
/>

### 错误快查

<Callout>
目前平台错误信息处理体系正在重构，将会在重构后补充具体的错误信息的快查文档。
</Callout>

## 常见问题

### 1. 对于 ACT 实验室用户，在实验室外部如何访问 GPU 集群？

客户端下载：https://vpn.buaa.edu.cn/portal，
点击登录框下面的《下载客户端》，在弹窗中选择对应操作系统进行下载。

### 2. 无法连接 ACT VPN 的应对处理方法：

检查本地 dns 解析是否正确;

```
dig vpn.act.buaa.edu.cn
```

如遇没有结果，可使用 `219.224.171.1` 代替 `vpn.act.buaa.edu.cn` 进行访问;
